/*
 * jQuery The Final Countdown plugin v2.0.0
 * http://github.com/hilios/jquery.countdown
 *
 * Copyright (c) 2011 Edson Hilios
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 */
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(a){if(a instanceof Date)return a;if(String(a).match(f))return String(a).match(/^[0-9]*$/)&&(a=Number(a)),new Date(a);throw new Error("Couldn't cast `"+a+"` to a date object.")}function c(a){return function(b){var c=b.match(/\%\-?[a-zA-Z]{1,}/g);if(c)for(var d=0,e=c.length;e>d;++d){var f=c[d].match(/\%(\-)?([a-zA-Z]+)/),h=f[1]||"",i=null;if(f=f[2],g.hasOwnProperty(f)&&(i=g[f],i=Number(a[i])),a.hasOwnProperty(f)&&(i=Number(a[f])),null!==i){""===h&&10>i&&(i="0"+i.toString());var j=new RegExp("%"+h+f);b=b.replace(j,i.toString())}}return b=b.replace(/%%/,"%")}}var d=100,e={},f=[];f.push(/^[0-9]*$/.source),f.push(/([0-9]{1,2}\/){2}[0-9]{4}((\s|T)[0-9]{1,2}(\:[0-9]{2}){2})?/.source),f.push(/[0-9]{4}(\/[0-9]{1,2}){2}((\s|T)[0-9]{1,2}(\:[0-9]{2}){2})?/.source),f=new RegExp(f.join("|"));var g={Y:"years",m:"months",w:"weeks",d:"days",D:"totalDays",H:"hours",M:"minutes",S:"seconds"},h=function(c,d,e){this.el=c,this.$el=a(c),this.interval=null,this.offset={},this.currentDate=new Date,this.finalDate=b(d),this.totalSecsLeft=Math.floor((this.finalDate.valueOf()-this.currentDate.valueOf())/1e3),e&&(this.$el.on("update.countdown",e),this.$el.on("stoped.countdown",e),this.$el.on("finish.countdown",e)),this.start()};a.extend(h.prototype,{start:function(){if(null!==this.interval)throw new Error("Countdown is already running!");var a=this;this.update(),this.interval=setInterval(function(){a.update.call(a)},d)},stop:function(){clearInterval(this.interval),this.interval=null,this.dispatchEvent("stoped")},pause:function(){this.stop.call(this)},resume:function(){this.start.call(this)},remove:function(){this.stop(),delete e[this.el]},update:function(){return 0===this.$el.closest("html").length?(this.remove(),void 0):(this.totalSecsLeft-=1,this.totalSecsLeft=this.totalSecsLeft<0?0:this.totalSecsLeft,this.offset={seconds:this.totalSecsLeft%60,minutes:Math.floor(this.totalSecsLeft/60)%60,hours:Math.floor(this.totalSecsLeft/60/60)%24,days:Math.floor(this.totalSecsLeft/60/60/24)%7,totalDays:Math.floor(this.totalSecsLeft/60/60/24),weeks:Math.floor(this.totalSecsLeft/60/60/24/7),months:Math.floor(this.totalSecsLeft/60/60/24/30),years:Math.floor(this.totalSecsLeft/60/60/24/365)},0===this.totalSecsLeft?(this.stop(),this.dispatchEvent("finish")):this.dispatchEvent("update"),void 0)},dispatchEvent:function(b){var d=a.Event(b+".countdown");d.finalDate=this.finalDate,d.offset=a.extend({},this.offset),d.offsetDate=new Date(this.totalSecsLeft),d.strftime=c(this.offset),this.$el.trigger(d)}}),a.fn.countdown=function(){var b=Array.prototype.slice.call(arguments,0);return this.each(function(){if(e.hasOwnProperty(this)){var c=b[0];if(h.prototype[c])return e[this][c].apply(e[this],b.slice(1));a.error("Method %s does not exist on jQuery.countdown".replace(/\%s/gi,c))}else e[this]=new h(this,b[0],b[1])})}});